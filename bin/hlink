#!/usr/bin/env python3

import os
from pathlib import Path


current_folder = os.path.dirname(os.path.abspath(__file__))
print('Current folder', current_folder)

parent_folder = os.path.dirname(current_folder)
print('Parent folder', parent_folder)

home = str(Path.home())
print('Home folder', home)
print()

# link from dotmatrix
for file_name in os.listdir(parent_folder):
    source = os.path.join(parent_folder, file_name)
    dest = os.path.join(home, file_name)

    if file_name.startswith('.'):
        if not os.path.exists(dest):
            print(dest + ' -> ' + source)
            os.symlink(source, dest)
        else:
            print('skipped ' + source + ' exists')

# link from Dropbox
for file_name in ['vimrc.local', 'zshrc.local', 'zshrc-Linux.local']:
    source = os.path.join(home, 'Dropbox', 'dotfiles', 'home', file_name)
    dest = os.path.join(home, '.' + file_name)

    if not os.path.exists(dest):
        print(dest + ' -> ' + source)
        os.symlink(source, dest)
    else:
        print('skipped ' + source + ' exists')

# setup neovim

# mkdir -p ~/.config/nvim
# ln -sf ~/dotmatrix/init.vim ~/.config/nvim/init.vim
